{"ast":null,"code":"import _regeneratorRuntime from\"/Users/florent/Documents/Websites/FlorentMANUEL_12_04102021/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/florent/Documents/Websites/FlorentMANUEL_12_04102021/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/florent/Documents/Websites/FlorentMANUEL_12_04102021/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import UserPerformanceMapper from'../mapper/UserPerformanceMapper';/**\n * Custom Hook to Fetch Performance Data\n *\n * @param { number } id\n * @return { Performances, performanceLoaded, errorPerf }\n */function useFetchPerf(id){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),errorPerf=_useState2[0],setError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),performanceLoaded=_useState4[0],setIsLoaded=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),performanceData=_useState6[0],setPerformanceData=_useState6[1];useEffect(function(){function fetchUser(){return _fetchUser.apply(this,arguments);}function _fetchUser(){_fetchUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,_yield$response$json,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"../\".concat(id,\"/performance.json\"));case 3:response=_context.sent;_context.next=6;return response.json();case 6:_yield$response$json=_context.sent;data=_yield$response$json.data;setPerformanceData(UserPerformanceMapper.convertToUserPerf(data));_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0);setError(true);case 15:_context.prev=15;setIsLoaded(true);return _context.finish(15);case 18:case\"end\":return _context.stop();}}},_callee,null,[[0,11,15,18]]);}));return _fetchUser.apply(this,arguments);}fetchUser();},[id]);return{performanceData:performanceData,performanceLoaded:performanceLoaded,errorPerf:errorPerf};}export default useFetchPerf;","map":{"version":3,"sources":["/Users/florent/Documents/Websites/FlorentMANUEL_12_04102021/src/services/PerformanceService.jsx"],"names":["useState","useEffect","UserPerformanceMapper","useFetchPerf","id","errorPerf","setError","performanceLoaded","setIsLoaded","performanceData","setPerformanceData","fetchUser","fetch","response","json","data","convertToUserPerf","console","log"],"mappings":"mhBAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAOC,CAAAA,qBAAP,KAAkC,iCAAlC,CAEA;AACA;AACA;AACA;AACA;AACA,GAEA,QAASC,CAAAA,YAAT,CAAsBC,EAAtB,CAA0B,eACQJ,QAAQ,CAAC,IAAD,CADhB,wCACfK,SADe,eACJC,QADI,8BAEmBN,QAAQ,CAAC,KAAD,CAF3B,yCAEfO,iBAFe,eAEIC,WAFJ,8BAGwBR,QAAQ,CAAC,EAAD,CAHhC,yCAGfS,eAHe,eAGEC,kBAHF,eAKtBT,SAAS,CAAC,UAAM,SACGU,CAAAA,SADH,qIACZ,gNAM+BC,CAAAA,KAAK,cAAOR,EAAP,sBANpC,QAMcS,QANd,qCAO+BA,CAAAA,QAAQ,CAACC,IAAT,EAP/B,2CAOgBC,IAPhB,sBAOgBA,IAPhB,CAQQL,kBAAkB,CACdR,qBAAqB,CAACc,iBAAtB,CAAwCD,IAAxC,CADc,CAAlB,CARR,iFAYQE,OAAO,CAACC,GAAR,cACAZ,QAAQ,CAAC,IAAD,CAAR,CAbR,yBAeQE,WAAW,CAAC,IAAD,CAAX,CAfR,sGADY,4CAmBZG,SAAS,GACZ,CApBQ,CAoBN,CAACP,EAAD,CApBM,CAAT,CAsBA,MAAO,CACHK,eAAe,CAAfA,eADG,CAEHF,iBAAiB,CAAjBA,iBAFG,CAGHF,SAAS,CAATA,SAHG,CAAP,CAKH,CAED,cAAeF,CAAAA,YAAf","sourcesContent":["import { useState, useEffect } from 'react'\nimport UserPerformanceMapper from '../mapper/UserPerformanceMapper'\n\n/**\n * Custom Hook to Fetch Performance Data\n *\n * @param { number } id\n * @return { Performances, performanceLoaded, errorPerf }\n */\n\nfunction useFetchPerf(id) {\n    const [errorPerf, setError] = useState(null)\n    const [performanceLoaded, setIsLoaded] = useState(false)\n    const [performanceData, setPerformanceData] = useState({})\n\n    useEffect(() => {\n        async function fetchUser() {\n            try {\n                // const response = await fetch(\n                //     `http://localhost:3000/user/${id}/performance`\n                // )\n                //** MOCK LINK **\n                const response = await fetch(`../${id}/performance.json`)\n                const { data } = await response.json()\n                setPerformanceData(\n                    UserPerformanceMapper.convertToUserPerf(data)\n                )\n            } catch (err) {\n                console.log(err)\n                setError(true)\n            } finally {\n                setIsLoaded(true)\n            }\n        }\n        fetchUser()\n    }, [id])\n\n    return {\n        performanceData,\n        performanceLoaded,\n        errorPerf,\n    }\n}\n\nexport default useFetchPerf\n"]},"metadata":{},"sourceType":"module"}