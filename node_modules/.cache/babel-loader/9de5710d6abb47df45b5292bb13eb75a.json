{"ast":null,"code":"import _regeneratorRuntime from\"/Users/florent/Documents/Websites/FlorentMANUEL_12_04102021/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/florent/Documents/Websites/FlorentMANUEL_12_04102021/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/florent/Documents/Websites/FlorentMANUEL_12_04102021/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import UserMapper from'../mapper/UserMapper';import UserKeyDataMapper from'../mapper/UserKeyDataMapper';/**\n * Custom Hook to Fetch User & Key Data\n *\n * @param { number } id\n * @return { UserData, KeyData, isLoaded, error }\n */function useFetch(id){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoaded=_useState4[0],setIsLoaded=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),userData=_useState6[0],setUserData=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),keyData=_useState8[0],setKeyData=_useState8[1];useEffect(function(){function fetchUser(){return _fetchUser.apply(this,arguments);}function _fetchUser(){_fetchUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,_yield$response$json,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"../\".concat(id,\"/user.json\"));case 3:response=_context.sent;_context.next=6;return response.json();case 6:_yield$response$json=_context.sent;data=_yield$response$json.data;setUserData(UserMapper.convertToUser(data));setKeyData(UserKeyDataMapper.convertToKeyData(data));_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);setError(_context.t0);console.log(_context.t0);case 16:_context.prev=16;setIsLoaded(true);return _context.finish(16);case 19:case\"end\":return _context.stop();}}},_callee,null,[[0,12,16,19]]);}));return _fetchUser.apply(this,arguments);}fetchUser();},[id]);return{userData:userData,keyData:keyData,isLoaded:isLoaded,error:error};}export default useFetch;","map":{"version":3,"sources":["/Users/florent/Documents/Websites/FlorentMANUEL_12_04102021/src/services/UserService.jsx"],"names":["useState","useEffect","UserMapper","UserKeyDataMapper","useFetch","id","error","setError","isLoaded","setIsLoaded","userData","setUserData","keyData","setKeyData","fetchUser","fetch","response","json","data","convertToUser","convertToKeyData","console","log"],"mappings":"mhBAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAOC,CAAAA,UAAP,KAAuB,sBAAvB,CACA,MAAOC,CAAAA,iBAAP,KAA8B,6BAA9B,CAEA;AACA;AACA;AACA;AACA;AACA,GAEA,QAASC,CAAAA,QAAT,CAAkBC,EAAlB,CAAsB,eACQL,QAAQ,CAAC,IAAD,CADhB,wCACXM,KADW,eACJC,QADI,8BAEcP,QAAQ,CAAC,KAAD,CAFtB,yCAEXQ,QAFW,eAEDC,WAFC,8BAGcT,QAAQ,CAAC,EAAD,CAHtB,yCAGXU,QAHW,eAGDC,WAHC,8BAIYX,QAAQ,CAAC,EAAD,CAJpB,yCAIXY,OAJW,eAIFC,UAJE,eAMlBZ,SAAS,CAAC,UAAM,SACGa,CAAAA,SADH,qIACZ,gNAI+BC,CAAAA,KAAK,cAAOV,EAAP,eAJpC,QAIcW,QAJd,qCAK+BA,CAAAA,QAAQ,CAACC,IAAT,EAL/B,2CAKgBC,IALhB,sBAKgBA,IALhB,CAMQP,WAAW,CAACT,UAAU,CAACiB,aAAX,CAAyBD,IAAzB,CAAD,CAAX,CACAL,UAAU,CAACV,iBAAiB,CAACiB,gBAAlB,CAAmCF,IAAnC,CAAD,CAAV,CAPR,iFASQX,QAAQ,aAAR,CACAc,OAAO,CAACC,GAAR,cAVR,yBAYQb,WAAW,CAAC,IAAD,CAAX,CAZR,sGADY,4CAgBZK,SAAS,GACZ,CAjBQ,CAiBN,CAACT,EAAD,CAjBM,CAAT,CAmBA,MAAO,CACHK,QAAQ,CAARA,QADG,CAEHE,OAAO,CAAPA,OAFG,CAGHJ,QAAQ,CAARA,QAHG,CAIHF,KAAK,CAALA,KAJG,CAAP,CAMH,CAED,cAAeF,CAAAA,QAAf","sourcesContent":["import { useState, useEffect } from 'react'\nimport UserMapper from '../mapper/UserMapper'\nimport UserKeyDataMapper from '../mapper/UserKeyDataMapper'\n\n/**\n * Custom Hook to Fetch User & Key Data\n *\n * @param { number } id\n * @return { UserData, KeyData, isLoaded, error }\n */\n\nfunction useFetch(id) {\n    const [error, setError] = useState(null)\n    const [isLoaded, setIsLoaded] = useState(false)\n    const [userData, setUserData] = useState({})\n    const [keyData, setKeyData] = useState({})\n\n    useEffect(() => {\n        async function fetchUser() {\n            try {\n                // const response = await fetch(`http://localhost:3000/user/${id}`)\n                // //** MOCK LINK **\n                const response = await fetch(`../${id}/user.json`)\n                const { data } = await response.json()\n                setUserData(UserMapper.convertToUser(data))\n                setKeyData(UserKeyDataMapper.convertToKeyData(data))\n            } catch (err) {\n                setError(err)\n                console.log(err)\n            } finally {\n                setIsLoaded(true)\n            }\n        }\n        fetchUser()\n    }, [id])\n\n    return {\n        userData,\n        keyData,\n        isLoaded,\n        error,\n    }\n}\n\nexport default useFetch\n"]},"metadata":{},"sourceType":"module"}