{"ast":null,"code":"import*as d3 from'd3';import{useEffect}from'react/cjs/react.development';import PropTypes from'prop-types';/**\n * D3.JS LineChart from user datas\n *\n * @param { array } sessions\n * @returns { <LineChartD3 />}\n */import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function LineChartD3(_ref){var sessions=_ref.sessions;useEffect(function(){/** CONSTANTS AND LIMITS INITIALISATION */var x=d3.scaleLinear().domain([1,7]).range([0,250]);var y=d3.scaleLinear().domain([d3.min(sessions,function(d){return d.sessionLength;})-5,d3.max(sessions,function(d){return d.sessionLength;})]).range([100,0]);/** LINE DRAWING */var valueLine=d3.line().x(function(d){return x(d.day);}).y(function(d){return y(d.sessionLength);}).curve(d3.curveBumpX);/** SVG AND PATH DESIGN */var svg=d3.select('.session-box');var path=svg.append('g').attr('transform','translate(0, 100)').append('path').attr('fill','none').attr('stroke','#fff').attr('stroke-width','2px').attr('stroke-dasharray',250).attr('stroke-dashoffset',250).attr('d',valueLine(sessions));path.transition().duration(600).attr('stroke-dasharray',0).attr('stroke-dashoffset',0);/** MOUSE OVER ANIMATIONS */sessions.map(function(session,index){var animations=svg.append('g');animations.append('circle').attr('id','circle'+index).attr('cx',function(d){return x(session.day);}).attr('cy',function(d){return y(session.sessionLength);}).attr('r',4).attr('fill','white').attr('transform','translate(0, 100)').attr('opacity','0');animations.append('rect').attr('id','infos'+index).attr('height',25).attr('width',39).attr('fill','#fff').attr('x',function(d){return x(session.day);}).attr('y',function(d){return y(session.sessionLength);}).attr('transform','translate(0, 70)').attr('opacity',0);animations.append('text').attr('id','time'+index).text(session.sessionLength+' min').attr('font-size','8').attr('fill','black').attr('x',function(d){return x(session.day);}).attr('y',function(d){return y(session.sessionLength);}).attr('transform','translate(7, 85)').attr('opacity',0);animations.append('rect').attr('height',250).attr('width',250-index*41.5).attr('fill','#000000').attr('x',function(d){return index*41.5;}).attr('opacity',0).on('mouseover',function(){d3.select(this).transition().duration('150').attr('opacity','.2');d3.select(\"#circle\".concat(index)).transition().duration('150').attr('opacity','1');d3.select(\"#infos\".concat(index)).transition().duration('150').attr('opacity','1');d3.select(\"#time\".concat(index)).transition().duration('150').attr('opacity','1');}).on('mouseout',function(){d3.select(this).transition().duration('150').attr('opacity','0');d3.select(\"#circle\".concat(index)).transition().duration('150').attr('opacity','0');d3.select(\"#infos\".concat(index)).transition().duration('150').attr('opacity','0');d3.select(\"#time\".concat(index)).transition().duration('150').attr('opacity','0');});// eslint-disable-next-line array-callback-return\nreturn;});},[sessions]);return/*#__PURE__*/_jsx(_Fragment,{children:\" \"});}export default LineChartD3;LineChartD3.propTypes={sessions:PropTypes.array};","map":{"version":3,"sources":["/Users/florent/Documents/Websites/FlorentMANUEL_12_04102021/src/D3/LineChartD3.jsx"],"names":["d3","useEffect","PropTypes","LineChartD3","sessions","x","scaleLinear","domain","range","y","min","d","sessionLength","max","valueLine","line","day","curve","curveBumpX","svg","select","path","append","attr","transition","duration","map","session","index","animations","text","on","propTypes","array"],"mappings":"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","sourcesContent":["import * as d3 from 'd3'\nimport { useEffect } from 'react/cjs/react.development'\nimport PropTypes from 'prop-types'\n\n/**\n * D3.JS LineChart from user datas\n *\n * @param { array } sessions\n * @returns { <LineChartD3 />}\n */\n\nfunction LineChartD3({ sessions }) {\n    useEffect(() => {\n        /** CONSTANTS AND LIMITS INITIALISATION */\n\n        let x = d3.scaleLinear().domain([1, 7]).range([0, 250])\n\n        let y = d3\n            .scaleLinear()\n            .domain([\n                d3.min(sessions, (d) => d.sessionLength) - 5,\n                d3.max(sessions, (d) => d.sessionLength),\n            ])\n            .range([100, 0])\n\n        /** LINE DRAWING */\n\n        let valueLine = d3\n            .line()\n            .x(function (d) {\n                return x(d.day)\n            })\n            .y(function (d) {\n                return y(d.sessionLength)\n            })\n            .curve(d3.curveBumpX)\n\n        /** SVG AND PATH DESIGN */\n\n        const svg = d3.select('.session-box')\n\n        const path = svg\n            .append('g')\n            .attr('transform', 'translate(0, 100)')\n            .append('path')\n            .attr('fill', 'none')\n            .attr('stroke', '#fff')\n            .attr('stroke-width', '2px')\n            .attr('stroke-dasharray', 250)\n            .attr('stroke-dashoffset', 250)\n            .attr('d', valueLine(sessions))\n\n        path.transition()\n            .duration(600)\n            .attr('stroke-dasharray', 0)\n            .attr('stroke-dashoffset', 0)\n\n        /** MOUSE OVER ANIMATIONS */\n\n        sessions.map((session, index) => {\n            const animations = svg.append('g')\n            animations\n                .append('circle')\n                .attr('id', 'circle' + index)\n                .attr('cx', function (d) {\n                    return x(session.day)\n                })\n                .attr('cy', function (d) {\n                    return y(session.sessionLength)\n                })\n                .attr('r', 4)\n                .attr('fill', 'white')\n                .attr('transform', 'translate(0, 100)')\n                .attr('opacity', '0')\n            animations\n                .append('rect')\n                .attr('id', 'infos' + index)\n                .attr('height', 25)\n                .attr('width', 39)\n                .attr('fill', '#fff')\n                .attr('x', function (d) {\n                    return x(session.day)\n                })\n                .attr('y', function (d) {\n                    return y(session.sessionLength)\n                })\n                .attr('transform', 'translate(0, 70)')\n                .attr('opacity', 0)\n            animations\n                .append('text')\n                .attr('id', 'time' + index)\n                .text(session.sessionLength + ' min')\n                .attr('font-size', '8')\n                .attr('fill', 'black')\n                .attr('x', function (d) {\n                    return x(session.day)\n                })\n                .attr('y', function (d) {\n                    return y(session.sessionLength)\n                })\n                .attr('transform', 'translate(7, 85)')\n                .attr('opacity', 0)\n            animations\n                .append('rect')\n                .attr('height', 250)\n                .attr('width', 250 - index * 41.5)\n                .attr('fill', '#000000')\n                .attr('x', function (d) {\n                    return index * 41.5\n                })\n                .attr('opacity', 0)\n                .on('mouseover', function () {\n                    d3.select(this)\n                        .transition()\n                        .duration('150')\n                        .attr('opacity', '.2')\n                    d3.select(`#circle${index}`)\n                        .transition()\n                        .duration('150')\n                        .attr('opacity', '1')\n                    d3.select(`#infos${index}`)\n                        .transition()\n                        .duration('150')\n                        .attr('opacity', '1')\n                    d3.select(`#time${index}`)\n                        .transition()\n                        .duration('150')\n                        .attr('opacity', '1')\n                })\n                .on('mouseout', function () {\n                    d3.select(this)\n                        .transition()\n                        .duration('150')\n                        .attr('opacity', '0')\n                    d3.select(`#circle${index}`)\n                        .transition()\n                        .duration('150')\n                        .attr('opacity', '0')\n                    d3.select(`#infos${index}`)\n                        .transition()\n                        .duration('150')\n                        .attr('opacity', '0')\n                    d3.select(`#time${index}`)\n                        .transition()\n                        .duration('150')\n                        .attr('opacity', '0')\n                })\n\n            // eslint-disable-next-line array-callback-return\n            return\n        })\n    }, [sessions])\n\n    return <> </>\n}\n\nexport default LineChartD3\n\nLineChartD3.propTypes = {\n    sessions: PropTypes.array,\n}\n"]},"metadata":{},"sourceType":"module"}